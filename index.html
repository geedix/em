<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Em Dash</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital@0;1&display=swap" rel="stylesheet"  />
    <link rel="stylesheet" href="/emstyle2.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/ScrollTrigger.min.js"></script>

</head>
<body class='home' onload="doStuff()">
    <!-- <body> -->
    <div class="main">
        <main>
        
                
                
            
                <div class="bigimg">

                    <img src="img2x/hp01.jpg" id="hp01" alt="image" class="h2x" loading="lazy">
                    <img src="img2x/hp02.jpg" id="hp02" alt="image" class="h2x" loading="lazy">
                    <img src="img2x/hp03.jpg" id="hp03" alt="image" class="h2x" loading="lazy">
                    <img src="img2x/hp04.jpg" id="hp04" alt="image" class="h2x" loading="lazy">
                    <img src="img2x/hp05.jpg" id="hp05" alt="image" class="h2x" loading="lazy">
                    <div class="vidwrap h2x">
                        <video class="vid" id="vid1" muted loop src="video/sp18-b5b_c1.mp4"></video>       
                    </div>   
                    <img src="img2x/hp07.jpg" id="hp07" class="h2x" loading="lazy">
                    <img src="img2x/hp08.jpg" id="hp08" class="h2x" loading="lazy">
                    <img src="img2x/hp09.png" id="hp09" class="h2x" loading="lazy">
                    <img src="img2x/hp10.jpg" id="hp10" class="h2x" loading="lazy">
                    <img src="img2x/hp11.jpg" id="hp11" class="h2x" loading="lazy">
                        <div id="hp12" class="h2x">
                            <hr>
                            <p>
                            dummy brand launch teaser box, <span>each card<br>
                            describes</span> a special <span>attribute</span> of the<br>
                            brand experience more <span>here</span> about more.       
                        </p><hr>
                            </div>


                    <img src="img2x/hp13.jpg" id="hp13" alt="beautiful work" class="h2x" loading="lazy">
                    <img src="img2x/hp14.jpg" id="hp14" alt="beautiful work" class="h2x" loading="lazy">
                    <img src="img2x/hp15.jpg" id="hp15" alt="beautiful work" class="h2x" loading="lazy">
                    <img src="img2x/hp16.jpg" id="hp16" alt="beautiful work" class="h2x" loading="lazy">
                    <img src="img2x/hp17.jpg" id="hp17" alt="beautiful work" class="h2x" loading="lazy">
                    <img src="img2x/hp18.png" id="hp18" alt="beautiful work" class="h2x" loading="lazy">
                    <img src="img2x/hp19.jpg" id="hp19" alt="beautiful work" class="h2x" loading="lazy">
                    <img src="img2x/hp20.png" id="hp20" alt="beautiful work" class="h2x" loading="lazy">
                    <img src="img2x/hp21.jpg" id="hp21" alt="beautiful work" class="h2x" loading="lazy">
                    <img src="img2x/hp22.png" id="hp22" alt="beautiful work" class="h2x" loading="lazy">
                    <img src="img2x/hp25.png" id="hp25" alt="beautiful work" class="h2x" loading="lazy">

                    

                    <img src="img2x/hp23.jpg" id="hp23" class="h2x" loading="lazy">
                    
                    <img src="img2x/hp24.png" id="hp24" class="h2x" loading="lazy">
                    <img src="img2x/kqed_merged2x.png" id="hp24alt" class="h2x" loading="lazy">

                    
                    <!-- <picture>
                        <source srcset="large.jpg, extralarge.jpg 2x" media="(min-width: 800px)">
                        <img srcset="small.jpg, medium.jpg 2x" alt="â€¦">
                      </picture> -->
                     <!-- <img src='images/homealone1x.jpg' alt='static layout' id="layout"> -->
            </div>
        </div>   
    </main>
</div> 
<sergey-import src="header" />
    <sergey-import src="footer" />
    <script>
        // document.onload = function(){

        gsap.registerPlugin(ScrollTrigger);
        function doStuff(){
            console.log('loaded.');
            // alert('fool');
            let mc = function (id) { return document.getElementById(id) };
            var video = document.getElementById('vid');

            function playVids(){
                mc('vid1').play();
            }
            playVids();

            gsap.set(".h2x", {y:"+=32"});

            batch(".h2x", {
                interval: 0.2, // time for batching
                batchMax: 3,   // maximum batch size (targets)
                onEnter: batch => gsap.to(batch, {autoAlpha: 1, y:2, duration:1.2, ease: "power4.out", stagger: 0.2, overwrite: true}),
                onLeave: batch => gsap.set(batch, {autoAlpha: 0, y:"-=20", overwrite: true}),
                onEnterBack: batch => gsap.to(batch, {autoAlpha: 1, y:2, stagger: 0.15, overwrite: true}),
                onLeaveBack: batch => gsap.to(batch, {autoAlpha: 0, y:"+=18", overwrite: true}), 
                start:"top 104%",
                // markers:true,
                // toggleActions: "play none none reverse",
                // end: "bottom top"
                end: "bottom -=504px"
                // end: "bottom 104%"
            });

            // could be replaced with ScrollTrigger.batch())
            function batch(targets, vars) {
            let varsCopy = {},
                interval = vars.interval || 0.15,
                proxyCallback = (type, callback) => {
                    let batch = [],
                        delay = gsap.delayedCall(interval, () => {callback(batch); batch.length = 0;}).pause();
                    return self => {
                        batch.length || delay.restart(true);
                        batch.push(self.trigger);
                        vars.batchMax && vars.batchMax <= batch.length && delay.progress(1);
                    };
                },
                p;
            for (p in vars) {
                varsCopy[p] = (~p.indexOf("Enter") || ~p.indexOf("Leave")) ? proxyCallback(p, vars[p]) : vars[p];
            }
            gsap.utils.toArray(targets).forEach(target => {
                let config = {};
                for (p in varsCopy) {
                config[p] = varsCopy[p];
                }
                config.trigger = target;
                ScrollTrigger.create(config);
            });
        }      
    }
    </script>

</body>
</html>